# FraudShield Deployment Guide for Render

This guide will help you deploy your FraudShield application to Render.

## Prerequisites

1. A GitHub repository containing this code
2. A Render account (sign up at https://render.com)
3. Your Supabase credentials

## Deployment Steps

### Step 1: Prepare Your Repository

1. **Push your code to GitHub:**
   - Create a new repository on GitHub
   - Push this code to your GitHub repository
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/yourusername/fraudshield.git
   git push -u origin main
   ```

### Step 2: Deploy on Render

#### Option A: Using render.yaml (Recommended)

1. **Create a new Web Service:**
   - Go to https://dashboard.render.com
   - Click "New +" and select "Web Service"
   - Connect your GitHub repository
   - Render will automatically detect the `render.yaml` file

2. **Configure Environment Variables:**
   - In the Render dashboard, go to your service's "Environment" tab
   - Add the following environment variables:
     ```
     SUPABASE_URL=https://ojhxgiqouayoyeemchjj.supabase.co
     SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9qaHhnaXFvdWF5b3llZW1jaGpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzOTY4NTIsImV4cCI6MjA3NDk3Mjg1Mn0.drmW0CA9Bil7z8A_G89uzVu9QSsu8It_YZQ0sFarb8w
     SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9qaHhnaXFvdWF5b3llZW1jaGpqIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTM5Njg1MiwiZXhwIjoyMDc0OTcyODUyfQ.74k1BAmi62ZTG98dQzhcT455_gVI9USbPqsiuwm82TI
     FLASK_ENV=production
     ```
   - FLASK_SECRET_KEY will be auto-generated by Render as specified in render.yaml

#### Option B: Manual Configuration

1. **Create a new Web Service:**
   - Go to https://dashboard.render.com
   - Click "New +" and select "Web Service"
   - Connect your GitHub repository

2. **Configure the service:**
   - **Name:** fraudshield-app
   - **Environment:** Python 3
   - **Build Command:** `pip install -r requirements.txt`
   - **Start Command:** `gunicorn --bind 0.0.0.0:$PORT app:app`
   - **Plan:** Free (or choose a paid plan for better performance)

3. **Set Environment Variables:** (Same as Option A above)

### Step 3: Deployment Process

1. **Automatic Deployment:**
   - Render will automatically build and deploy your application
   - The build process will install dependencies from requirements.txt
   - Your app will be available at `https://your-app-name.onrender.com`

2. **Monitor Deployment:**
   - Check the "Logs" tab in your Render dashboard
   - Look for successful startup messages
   - The fraud detection model will be trained on startup

### Step 4: Testing Your Deployment

1. **Access your application:**
   - Visit `https://your-app-name.onrender.com`
   - You should see the FraudShield landing page

2. **Test functionality:**
   - Try the demo at `/demo`
   - Test user registration and login
   - Verify fraud detection predictions work

## Important Notes

### Environment Variables
- Never commit your `.env` file to GitHub (it's already in .gitignore)
- Set all environment variables in the Render dashboard
- FLASK_SECRET_KEY should be a secure random string in production

### Database
- Your Supabase database is already configured and will work in production
- The app falls back to demo mode if Supabase connection fails

### Performance
- The free tier has limitations (goes to sleep after inactivity)
- Consider upgrading to a paid plan for production use
- The fraud detection model is retrained on each startup

### SSL/HTTPS
- Render automatically provides SSL certificates
- Your app will be accessible via HTTPS

### Custom Domain (Optional)
- You can configure a custom domain in the Render dashboard
- Add CNAME records pointing to your Render app

## Troubleshooting

### Common Issues

1. **Build Failures:**
   - Check the build logs in Render dashboard
   - Ensure requirements.txt includes all dependencies
   - Verify Python version compatibility

2. **Scikit-learn Build Errors (Cython compilation failures):**
   - This occurs when trying to build scikit-learn from source
   - **Solution:** Use the updated requirements.txt with compatible versions
   - **Alternative:** Add `--only-binary=all` flag to pip install command
   - Ensure Python version in runtime.txt has pre-built wheels available

3. **Python Version Issues:**
   - If you see Python 3.13+ in logs but specified 3.12 in runtime.txt
   - **Solution:** Update runtime.txt to use Python 3.12.3 (has better package compatibility)
   - Very new Python versions may not have pre-built wheels for all packages

4. **Startup Issues:**
   - Check the deployment logs
   - Verify environment variables are set correctly
   - Ensure the start command is correct

5. **Database Connection:**
   - Verify Supabase credentials are correct
   - Check Supabase project status
   - App will fall back to demo mode if database fails

### Support
- Render Documentation: https://render.com/docs
- Render Community: https://community.render.com
- Check logs in the Render dashboard for detailed error messages

## Next Steps

After successful deployment:
1. Set up monitoring and alerts
2. Configure backups (if using database storage)
3. Set up continuous deployment from your main branch
4. Consider setting up staging and production environments